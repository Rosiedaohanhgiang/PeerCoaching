<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yamaha Peer Practice Companion</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        :root {
            --yamaha-red: #E60012;
            --yamaha-blue: #1D4370;
            --dark-bg: #0F172A;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--dark-bg);
            color: white;
            height: 100vh;
            overflow: hidden;
        }

        .font-oswald { font-family: 'Oswald', sans-serif; }

        /* Card Effects */
        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.3);
        }

        /* Timer Animation */
        .timer-ring circle {
            transition: stroke-dashoffset 1s linear;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }

        /* Tab Transitions */
        .tab-content {
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .tab-content.active {
            display: block;
            opacity: 1;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }
    </style>
</head>
<body>

    <!-- APP CONTAINER -->
    <div id="app" class="h-full flex flex-col max-w-7xl mx-auto p-4 md:p-6">
        
        <!-- HEADER -->
        <header class="flex justify-between items-center mb-6 shrink-0">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-[var(--yamaha-red)] rounded flex items-center justify-center font-bold text-xl shadow-lg shadow-red-900/50">
                    <i class="ph-bold ph-users-four"></i>
                </div>
                <div>
                    <h1 class="font-oswald text-2xl font-bold uppercase tracking-wider">Peer Practice Lab</h1>
                    <p class="text-xs text-gray-400">Dành cho nhóm 4 học viên | Yamaha Motor VN</p>
                </div>
            </div>
            <div class="flex items-center gap-4 bg-gray-800/50 px-4 py-2 rounded-full border border-gray-700">
                <div class="flex items-center gap-2">
                    <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                    <span class="text-sm font-medium text-gray-300" id="session-status">Sẵn sàng</span>
                </div>
                <div class="h-4 w-px bg-gray-600"></div>
                <button onclick="app.resetSession()" class="text-xs text-gray-400 hover:text-white transition uppercase font-bold"><i class="ph-bold ph-arrow-counter-clockwise"></i> Reset</button>
            </div>
        </header>

        <!-- MAIN VIEW SWITCHER -->
        <main class="flex-1 flex gap-6 overflow-hidden relative">
            
            <!-- VIEW 1: SETUP (Lobby) -->
            <div id="view-setup" class="w-full h-full flex flex-col items-center justify-center transition-all duration-500">
                <h2 class="font-oswald text-4xl mb-2 text-[var(--yamaha-blue)] font-bold uppercase">Phân Vai Thực Hành</h2>
                <p class="text-gray-400 mb-8">Danh sách học viên đã được cập nhật. Bấm nút để chia vai ngẫu nhiên.</p>
                
                <div class="grid grid-cols-2 gap-4 w-full max-w-2xl mb-8">
                    <input type="text" id="p1" class="glass-panel p-4 rounded text-center text-lg focus:border-[var(--yamaha-red)] outline-none text-white placeholder-gray-600 font-bold" value="Ms. Hoàng Thu Minh">
                    <input type="text" id="p2" class="glass-panel p-4 rounded text-center text-lg focus:border-[var(--yamaha-red)] outline-none text-white placeholder-gray-600 font-bold" value="Ms. Đặng Hồng Vân">
                    <input type="text" id="p3" class="glass-panel p-4 rounded text-center text-lg focus:border-[var(--yamaha-red)] outline-none text-white placeholder-gray-600 font-bold" value="Mr. Nguyễn Trung Kiên">
                    <input type="text" id="p4" class="glass-panel p-4 rounded text-center text-lg focus:border-[var(--yamaha-red)] outline-none text-white placeholder-gray-600 font-bold" value="Ms. Nguyễn Thu Hiền">
                </div>

                <button onclick="app.startRoulette()" class="bg-[var(--yamaha-red)] hover:bg-red-700 text-white font-bold py-4 px-12 rounded-full shadow-lg shadow-red-900/50 transform transition hover:scale-105 flex items-center gap-3 text-lg uppercase tracking-widest">
                    <i class="ph-bold ph-shuffle"></i> Chia Vai & Bắt Đầu
                </button>
            </div>

            <!-- VIEW 2: ACTIVE SESSION (Hidden by default) -->
            <div id="view-session" class="w-full h-full flex gap-6 hidden opacity-0 translate-y-10 transition-all duration-500">
                
                <!-- LEFT: CONTROL CENTER (Timer & Phases) -->
                <div class="w-1/3 flex flex-col gap-4">
                    <!-- Timer Card -->
                    <div class="glass-panel p-6 rounded-2xl flex flex-col items-center justify-center relative overflow-hidden">
                        <div class="relative w-40 h-40">
                            <svg class="w-full h-full timer-ring transform -rotate-90">
                                <circle cx="80" cy="80" r="70" stroke="#1e293b" stroke-width="8" fill="transparent"></circle>
                                <circle id="timer-progress" cx="80" cy="80" r="70" stroke="#E60012" stroke-width="8" fill="transparent" stroke-dasharray="440" stroke-dashoffset="0"></circle>
                            </svg>
                            <div class="absolute top-0 left-0 w-full h-full flex flex-col items-center justify-center">
                                <span id="timer-display" class="text-4xl font-bold font-oswald">15:00</span>
                                <span class="text-xs text-gray-400 uppercase tracking-widest">Phút</span>
                            </div>
                        </div>
                        <div class="flex gap-2 mt-6 w-full">
                            <button onclick="timer.toggle()" id="btn-timer" class="flex-1 bg-white text-black py-2 rounded font-bold hover:bg-gray-200 transition">Bắt đầu</button>
                            <button onclick="timer.add(1)" class="px-3 bg-gray-700 rounded hover:bg-gray-600 text-white transition">+1m</button>
                        </div>
                    </div>

                    <!-- Roles List -->
                    <div class="glass-panel p-6 rounded-2xl flex-1 flex flex-col justify-center">
                        <h3 class="text-gray-400 text-xs uppercase font-bold tracking-widest mb-4">Đội hình phiên này</h3>
                        <div class="space-y-4">
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 rounded bg-[var(--yamaha-red)] flex items-center justify-center font-bold text-white">C</div>
                                <div>
                                    <div class="text-xs text-gray-400">COACH (Người hỏi)</div>
                                    <div id="role-coach" class="font-bold text-lg text-yellow-400"></div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 rounded bg-green-600 flex items-center justify-center font-bold text-white">E</div>
                                <div>
                                    <div class="text-xs text-gray-400">COACHEE (Người trả lời)</div>
                                    <div id="role-coachee" class="font-bold text-lg text-green-400"></div>
                                </div>
                            </div>
                            <div class="h-px bg-gray-700 my-2"></div>
                            <div class="flex items-center gap-3 opacity-70">
                                <div class="w-8 h-8 rounded bg-[var(--yamaha-blue)] flex items-center justify-center font-bold text-white">O</div>
                                <div>
                                    <div class="text-xs text-gray-400">OBSERVER 1 (Quy trình)</div>
                                    <div id="role-obs1" class="font-bold"></div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3 opacity-70">
                                <div class="w-8 h-8 rounded bg-[var(--yamaha-blue)] flex items-center justify-center font-bold text-white">O</div>
                                <div>
                                    <div class="text-xs text-gray-400">OBSERVER 2 (Hành vi)</div>
                                    <div id="role-obs2" class="font-bold"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- RIGHT: INTERACTIVE GUIDES -->
                <div class="w-2/3 glass-panel rounded-2xl flex flex-col overflow-hidden">
                    <!-- Tabs Header -->
                    <div class="flex border-b border-gray-700">
                        <button onclick="app.switchTab('process')" class="tab-btn flex-1 py-4 text-center text-sm font-bold uppercase tracking-widest hover:bg-white/5 transition text-[var(--yamaha-red)] border-b-2 border-[var(--yamaha-red)]" id="tab-process">Quy Trình Chung</button>
                        <button onclick="app.switchTab('guide')" class="tab-btn flex-1 py-4 text-center text-sm font-bold uppercase tracking-widest hover:bg-white/5 transition text-gray-500" id="tab-guide">Hướng dẫn Coach</button>
                        <button onclick="app.switchTab('check1')" class="tab-btn flex-1 py-4 text-center text-sm font-bold uppercase tracking-widest hover:bg-white/5 transition text-gray-500" id="tab-check1">Checklist Obs 1</button>
                        <button onclick="app.switchTab('check2')" class="tab-btn flex-1 py-4 text-center text-sm font-bold uppercase tracking-widest hover:bg-white/5 transition text-gray-500" id="tab-check2">Checklist Obs 2</button>
                    </div>

                    <!-- NEW TAB: General Process -->
                    <div id="content-process" class="tab-content active p-6 flex-1 overflow-y-auto">
                        <div class="bg-teal-900/20 p-4 rounded-lg border-l-4 border-teal-500 mb-6">
                            <h4 class="font-bold text-teal-400 mb-1">Peer Coaching là gì?</h4>
                            <p class="text-sm text-gray-300">Là buổi thực hành có cấu trúc nơi người đồng cấp coach cho nhau. Mục tiêu không phải là "giải quyết vấn đề" hộ đồng nghiệp, mà là luyện tập kỹ năng, nhận phản hồi và học hỏi.</p>
                        </div>

                        <div class="space-y-6">
                            <div class="relative pl-6 border-l-2 border-gray-700">
                                <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-gray-500"></div>
                                <h4 class="text-lg font-bold text-white mb-1">Bước 1: Phân Vai (5 phút)</h4>
                                <p class="text-sm text-gray-400">Xác định ai là Coach, Coachee, và 2 Observer.</p>
                            </div>

                            <div class="relative pl-6 border-l-2 border-[var(--yamaha-red)]">
                                <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-[var(--yamaha-red)]"></div>
                                <h4 class="text-lg font-bold text-[var(--yamaha-red)] mb-2">Bước 2: Phiên Coach (15 phút)</h4>
                                <ul class="space-y-2 text-sm text-gray-300">
                                    <li><strong class="text-white">Coachee:</strong> Chia sẻ ngắn gọn một thách thức thực tế.</li>
                                    <li><strong class="text-white">Coach:</strong> Dùng mô hình GROW để dẫn dắt.</li>
                                    <li><strong class="text-white">Observers:</strong> Im lặng tuyệt đối. Ghi chép kỹ năng và ngôn ngữ cơ thể vào checklist.</li>
                                </ul>
                            </div>

                            <div class="relative pl-6 border-l-2 border-blue-500">
                                <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-blue-500"></div>
                                <h4 class="text-lg font-bold text-blue-400 mb-2">Bước 3: Vòng Phản Hồi (10-15 phút)</h4>
                                <p class="text-sm text-gray-400 italic mb-2">Đây là bước quan trọng nhất để học hỏi!</p>
                                <ol class="list-decimal list-inside text-sm text-gray-300 space-y-1">
                                    <li>Coach tự phản tư trước.</li>
                                    <li>Coachee chia sẻ cảm nhận khi được coach.</li>
                                    <li>Lần lượt 2 Observer đưa ra góc nhìn dựa trên ghi chép.</li>
                                </ol>
                            </div>

                            <div class="relative pl-6 border-l-2 border-gray-700">
                                <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-gray-500"></div>
                                <h4 class="text-lg font-bold text-white mb-1">Bước 4: Đổi Vai</h4>
                                <p class="text-sm text-gray-400">Xoay vòng để ai cũng được làm Coach và Coachee ít nhất một lần.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Tab Content: Coach Guide (GROW) -->
                    <div id="content-guide" class="tab-content p-6 flex-1 overflow-y-auto">
                        <div class="space-y-6">
                            <!-- G -->
                            <div class="bg-gray-800/50 p-4 rounded-lg border-l-4 border-blue-500">
                                <h4 class="font-oswald text-xl font-bold text-blue-400 mb-2">1. GOAL - Mục tiêu (2 phút)</h4>
                                <ul class="list-disc pl-5 space-y-2 text-gray-300 text-sm">
                                    <li>"Em muốn đạt được kết quả cụ thể nào sau 15 phút này?"</li>
                                    <li>"Mục tiêu này liên quan thế nào đến Kando/khách hàng?"</li>
                                    <li>"Làm sao em biết mình đã đạt được mục tiêu đó?"</li>
                                </ul>
                            </div>
                            <!-- R -->
                            <div class="bg-gray-800/50 p-4 rounded-lg border-l-4 border-red-500">
                                <h4 class="font-oswald text-xl font-bold text-red-400 mb-2">2. REALITY - Thực tại (5 phút)</h4>
                                <ul class="list-disc pl-5 space-y-2 text-gray-300 text-sm">
                                    <li>"Chuyện gì đang thực sự diễn ra tại Genba?"</li>
                                    <li>"Em có dữ liệu/số liệu (Fact) cụ thể không, hay đây là phỏng đoán?"</li>
                                    <li>"Ai/Cái gì đang bị ảnh hưởng bởi vấn đề này?"</li>
                                    <li><span class="text-yellow-500 font-bold">Lưu ý:</span> Lắng nghe sâu, không phán xét.</li>
                                </ul>
                            </div>
                            <!-- O -->
                            <div class="bg-gray-800/50 p-4 rounded-lg border-l-4 border-green-500">
                                <h4 class="font-oswald text-xl font-bold text-green-400 mb-2">3. OPTIONS - Giải pháp (5 phút)</h4>
                                <ul class="list-disc pl-5 space-y-2 text-gray-300 text-sm">
                                    <li>"Nếu không có rào cản nào, em sẽ làm gì?" (Kaizen mindset)</li>
                                    <li>"Còn cách nào khác nữa không? Cách nào đơn giản hơn?"</li>
                                    <li>"Ai có thể hỗ trợ em việc này?"</li>
                                </ul>
                            </div>
                            <!-- W -->
                            <div class="bg-gray-800/50 p-4 rounded-lg border-l-4 border-orange-500">
                                <h4 class="font-oswald text-xl font-bold text-orange-400 mb-2">4. WILL - Cam kết (3 phút)</h4>
                                <ul class="list-disc pl-5 space-y-2 text-gray-300 text-sm">
                                    <li>"Em chọn giải pháp nào để làm ngay ngày mai?"</li>
                                    <li>"Mức độ tự tin của em là bao nhiêu (1-10)?"</li>
                                    <li>"Khi nào anh có thể nghe em báo cáo kết quả?"</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Tab Content: Observer 1 (Process) -->
                    <div id="content-check1" class="tab-content p-6 flex-1 overflow-y-auto">
                        <div class="bg-blue-900/20 p-4 rounded mb-4 text-sm text-blue-200 border border-blue-500/30">
                            <strong>Nhiệm vụ:</strong> Quan sát xem Coach có tuân thủ quy trình GROW không. Đánh dấu vào các ô bên dưới.
                        </div>
                        <div class="space-y-3">
                            <label class="flex items-center gap-3 p-3 bg-gray-800 rounded hover:bg-gray-700 cursor-pointer">
                                <input type="checkbox" class="w-5 h-5 accent-blue-500">
                                <span>Coach đã thiết lập mục tiêu rõ ràng ngay từ đầu?</span>
                            </label>
                            <label class="flex items-center gap-3 p-3 bg-gray-800 rounded hover:bg-gray-700 cursor-pointer">
                                <input type="checkbox" class="w-5 h-5 accent-blue-500">
                                <span>Coach yêu cầu dữ liệu/bằng chứng thay vì cảm tính?</span>
                            </label>
                            <label class="flex items-center gap-3 p-3 bg-gray-800 rounded hover:bg-gray-700 cursor-pointer">
                                <input type="checkbox" class="w-5 h-5 accent-blue-500">
                                <span>Coach đã hỏi "Còn gì nữa không?" ít nhất 2 lần ở phần Option?</span>
                            </label>
                            <label class="flex items-center gap-3 p-3 bg-gray-800 rounded hover:bg-gray-700 cursor-pointer">
                                <input type="checkbox" class="w-5 h-5 accent-blue-500">
                                <span>Coach chốt được hành động cụ thể và thời hạn?</span>
                            </label>
                            <textarea class="w-full bg-gray-800 rounded p-3 text-sm mt-4 text-white placeholder-gray-500 border border-gray-700 focus:border-blue-500 outline-none" rows="4" placeholder="Ghi chú thêm về quy trình..."></textarea>
                        </div>
                    </div>

                    <!-- Tab Content: Observer 2 (Behavior) -->
                    <div id="content-check2" class="tab-content p-6 flex-1 overflow-y-auto">
                        <div class="bg-purple-900/20 p-4 rounded mb-4 text-sm text-purple-200 border border-purple-500/30">
                            <strong>Nhiệm vụ:</strong> Quan sát ngôn ngữ cơ thể, giọng điệu và sự lắng nghe.
                        </div>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span>Tỉ lệ Nói/Nghe của Coach</span>
                                    <span class="text-gray-400">Tốt nhất là 20/80</span>
                                </div>
                                <input type="range" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer" min="0" max="100" value="50">
                                <div class="flex justify-between text-xs text-gray-500 mt-1">
                                    <span>Nói quá nhiều</span>
                                    <span>Cân bằng</span>
                                    <span>Lắng nghe tốt</span>
                                </div>
                            </div>
                            
                            <label class="flex items-center gap-3 p-3 bg-gray-800 rounded hover:bg-gray-700 cursor-pointer">
                                <input type="checkbox" class="w-5 h-5 accent-purple-500">
                                <span>Coach duy trì giao tiếp mắt (Eye contact)?</span>
                            </label>
                            <label class="flex items-center gap-3 p-3 bg-gray-800 rounded hover:bg-gray-700 cursor-pointer">
                                <input type="checkbox" class="w-5 h-5 accent-purple-500">
                                <span>Coach không ngắt lời Coachee?</span>
                            </label>
                            <label class="flex items-center gap-3 p-3 bg-gray-800 rounded hover:bg-gray-700 cursor-pointer">
                                <input type="checkbox" class="w-5 h-5 accent-purple-500">
                                <span>Coach tạo ra khoảng lặng để Coachee suy nghĩ?</span>
                            </label>
                            <textarea class="w-full bg-gray-800 rounded p-3 text-sm mt-4 text-white placeholder-gray-500 border border-gray-700 focus:border-purple-500 outline-none" rows="4" placeholder="Ghi chú về cảm xúc/thái độ..."></textarea>
                        </div>
                    </div>

                </div>
            </div>
        </main>

        <!-- FOOTER INFO -->
        <footer class="mt-6 text-center text-xs text-gray-500 shrink-0">
            <p>Khuyến nghị: Mỗi phiên kéo dài 15 phút + 5 phút phản hồi. Xoay vòng vai trò sau mỗi phiên.</p>
        </footer>
    </div>

    <!-- LOGIC -->
    <script>
        const app = {
            setupView: document.getElementById('view-setup'),
            sessionView: document.getElementById('view-session'),
            
            startRoulette() {
                // Get names from inputs
                const names = [
                    document.getElementById('p1').value,
                    document.getElementById('p2').value,
                    document.getElementById('p3').value,
                    document.getElementById('p4').value
                ];

                // Shuffle array (Fisher-Yates)
                for (let i = names.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [names[i], names[j]] = [names[j], names[i]];
                }

                // Assign Roles
                document.getElementById('role-coach').innerText = names[0];
                document.getElementById('role-coachee').innerText = names[1];
                document.getElementById('role-obs1').innerText = names[2];
                document.getElementById('role-obs2').innerText = names[3];

                // Transition UI
                this.setupView.classList.add('opacity-0', '-translate-y-10');
                setTimeout(() => {
                    this.setupView.classList.add('hidden');
                    this.sessionView.classList.remove('hidden');
                    // Trigger reflow
                    void this.sessionView.offsetWidth; 
                    this.sessionView.classList.remove('opacity-0', 'translate-y-10');
                    document.getElementById('session-status').innerText = "Đang diễn ra";
                    document.getElementById('session-status').classList.remove('text-gray-300');
                    document.getElementById('session-status').classList.add('text-green-500');
                }, 500);
            },

            resetSession() {
                if(confirm("Bạn có chắc muốn reset và chia lại vai không?")) {
                    timer.stop();
                    this.sessionView.classList.add('opacity-0', 'translate-y-10');
                    setTimeout(() => {
                        this.sessionView.classList.add('hidden');
                        this.setupView.classList.remove('hidden');
                        void this.setupView.offsetWidth;
                        this.setupView.classList.remove('opacity-0', '-translate-y-10');
                        document.getElementById('session-status').innerText = "Sẵn sàng";
                        document.getElementById('session-status').classList.remove('text-green-500');
                        document.getElementById('session-status').classList.add('text-gray-300');
                    }, 500);
                }
            },

            switchTab(tabName) {
                // Remove active classes
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.remove('text-[var(--yamaha-red)]', 'border-b-2', 'border-[var(--yamaha-red)]');
                    btn.classList.add('text-gray-500');
                });
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });

                // Add active class to selected
                const btn = document.getElementById(`tab-${tabName}`);
                const content = document.getElementById(`content-${tabName}`);
                
                btn.classList.remove('text-gray-500');
                btn.classList.add('text-[var(--yamaha-red)]', 'border-b-2', 'border-[var(--yamaha-red)]');
                content.classList.add('active');
            }
        };

        const timer = {
            totalSeconds: 15 * 60,
            remainingSeconds: 15 * 60,
            interval: null,
            isRunning: false,
            display: document.getElementById('timer-display'),
            circle: document.getElementById('timer-progress'),
            circumference: 70 * 2 * Math.PI, // r=70

            updateDisplay() {
                const m = Math.floor(this.remainingSeconds / 60);
                const s = this.remainingSeconds % 60;
                this.display.innerText = `${m < 10 ? '0' : ''}${m}:${s < 10 ? '0' : ''}${s}`;
                
                // Update Circle
                const offset = this.circumference - (this.remainingSeconds / this.totalSeconds) * this.circumference;
                this.circle.style.strokeDashoffset = offset;

                // Color warning
                if (this.remainingSeconds < 60) {
                    this.circle.style.stroke = "#fbbf24"; // yellow
                }
                if (this.remainingSeconds < 10) {
                    this.circle.style.stroke = "#ef4444"; // red warning
                    this.display.classList.add('text-red-500');
                }
            },

            toggle() {
                const btn = document.getElementById('btn-timer');
                if (this.isRunning) {
                    this.stop();
                    btn.innerText = "Tiếp tục";
                } else {
                    this.start();
                    btn.innerText = "Tạm dừng";
                }
            },

            start() {
                if (this.isRunning) return;
                this.isRunning = true;
                this.interval = setInterval(() => {
                    if (this.remainingSeconds > 0) {
                        this.remainingSeconds--;
                        this.updateDisplay();
                    } else {
                        this.stop();
                        alert("Hết giờ! Hãy chuyển sang phần phản hồi của Observer.");
                    }
                }, 1000);
            },

            stop() {
                this.isRunning = false;
                clearInterval(this.interval);
            },

            add(minutes) {
                this.remainingSeconds += minutes * 60;
                this.totalSeconds += minutes * 60; // Adjust total to keep progress bar smooth relative to new time or keep absolute? Let's just add time.
                this.updateDisplay();
            }
        };

        // Init Timer Circle
        timer.circle.style.strokeDasharray = `${timer.circumference} ${timer.circumference}`;
        timer.circle.style.strokeDashoffset = 0;

    </script>
</body>
</html>